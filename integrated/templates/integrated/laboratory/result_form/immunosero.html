<DOCTYPE html>
    {% load static %}
    <head>
        <title>IMMUNOSEROLOGY({{ptx.patlast}}, {{ptx.patfirst}})</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <style>
    body {
        margin: 0;
        padding: 0;
        /* background-color: #FAFAFA; */
        font: 12pt "Times New Roman";
    }
    * {
        box-sizing: border-box;
        -moz-box-sizing: border-box;
    }
    .page {
        width: 21cm;
        min-height: 29.7cm;
        /* padding: 2cm; */
        margin: 1cm auto;
        border: 1px #D3D3D3 solid;
        border-radius: 5px;
        background: white;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .subpage {
        padding: 1cm;
        /* padding: 10px; */
        /* border: 5px red solid; */
        height: 256mm;
        background-image:url("{% static 'integrated/img/lab-bg.png'%}") ;
        /* outline: 1cm #FFEAEA solid; */
        background-repeat: no-repeat; background-size: cover; background-position: center center;
    }
    
    @page {
        size: A4;
        margin: 0;
    }
    @media print {
        .page {
            margin: 0;
            border: initial;
            border-radius: initial;
            width: initial;
            min-height: initial;
            box-shadow: initial;
            background: initial;
            page-break-after: always;
        }
    }
    .ptx_data td {
  border: .5px solid rgb(196, 192, 192);
  border-collapse: collapse;
  padding: 4px;
}
.result_data td {
  border: .5px solid rgb(196, 192, 192);
  border-collapse: collapse;
  padding: 5px;
  
}
.staff_data td {
  border: .5px solid rgb(196, 192, 192);
  border-collapse: collapse;
}

        </style>
    </head>
    <body>
 
        <div class="book">
            <div class="page">
                <div class="subpage">
                 <div class="header" style="height: 100px;">
                    <table style="border-bottom: 4px solid rgb(14, 14, 187);width: 100%;">
                        <tr>
                        <td><img src="{% static 'integrated/img/brghgmclogo.png'%}" style="width: 70px; height: 70px;margin: 0px;" /></td>
                        <td><img src="{% static 'integrated/img/doh.png'%}" style="width: 70px; height: 70px;margin: 0px;" /></td>
                        <td style="text-align: center;padding: 0px;">
                          <span style="font-weight: bolder;font-size: 14px;color:rgb(3, 87, 45)">BICOL REGION GENERAL HOSPITAL AND GERIATRIC MEDICAL CENTER</span><br>
                          <span class="fw-bolder" style="font-size: 12px;">Formerly( Bicol Sanitarium )</span><br>
                          <span style="font-size: 10px;">San Pedro, Cabusao, Camarines Sur</span><br>
                          <span style="font-size: 10px;">Telephone Nos.: (054) 473-2244; 472-4422, 881-1033, 881-1761</span><br>
                          <span style="font-size: 10px;">Email Address: bicolsan@yahoo.com; brghgmc@gmail.com</span>
                        </td>
                        </tr>
                    </table>
                   
                 </div>
             
                 <div class="content" style="height: 950px;padding: 0px;margin: 0px;">
                    <h5 class="text-center fw-bolder mb-4" >IMMUNOSEROLOGY</h5>
                    <table class="w-100 ptx_data mb-2" >
                        
                        <tr>
                            <td class="fw-bolder col-1" align="right" style="font-size: 12px;">PATIENT:</td>
                            <td class="col-4" align="left" style="font-size: 14px;"><span class="fw-bolder">{{ptx.patlast}}, {{ptx.patfirst}}</span></td>
                            <td class="fw-bolder col-2" align="right" style="font-size: 12px;">RESULT DATE:</td>
                            <td class="col-4" style="font-size: 14px;"><span class="fw-bolder">{{ test.date_verified}}</span></td>
                        </tr>
                        <tr>
                            <td class="fw-bolder col-1" align="right" style="font-size: 12px;">HOSP NO.:</td>
                            <td class="col-4" align="left" style="font-size: 14px;"><span class="fw-bolder">{{ptx.hpercode}}</span></td>
                            <td class="fw-bolder col-2" align="right" style="font-size: 12px;">CONTROL NO.:</td>
                            <td class="col-4" style="font-size: 16px;"><span class="fw-bolder text-danger">{{ test.control_no}}</span></td>
                        </tr>
                        <tr>
                            <td class="fw-bolder col-1" align="right" style="font-size: 12px;">GENDER:</td>
                            <td class="col-4" align="left" style="font-size: 14px;"><span class="fw-bolder">{{ptx.patsex}}</span></td>
                            <td class="fw-bolder col-2" align="right" style="font-size: 12px;">WARD:</td>
                            <td class="col-4" style="font-size: 14px;"><span class="fw-bolder">{{ward}}</span></td>
                        </tr>
                        <tr>
                            <td class="fw-bolder col-1" align="right" style="font-size: 12px;">AGE:</td>
                            <td class="col-4" align="left" style="font-size: 14px;"><span class="fw-bolder">{{ptx.patage}}</span></td>
                            <td class="fw-bolder col-2" align="right" style="font-size: 12px;">PHYSICIAN:</td>
                            <td class="col-4" style="font-size: 14px;"><span class="fw-bolder">{{doctor}}</span></td>
                        </tr>
                        <tr>
                            <td class="fw-bolder col-1" align="right" style="font-size: 12px;">DOB:</td>
                            <td colspan="3" class="col-4" align="left" style="font-size: 14px;"><span class="fw-bolder">{{ptx.birthdate}}</span></td>
                        </tr>
                     
                        <tr>
                            <td class="fw-bolder col-1" align="right" style="font-size: 12px;">Notes:</td>
                            <td colspan="3" class="col-4" align="left" style="font-size: 14px;"><span class="fw-bolder text-danger">
                                {% if test.note == '' %}
                                N/A
                                {% else %}
                                {{test.note}}
                                {% endif %}
                            </span></td>
                        </tr>
                       
                    </table>

                    <table class="w-100 result_data mb-2 table table-striped">
                        <tr class="bg-dark text-white">
                            <td class="col-2 fw-bolder" align="center" >TESTS</td>
                            <td class="col-2 fw-bolder" align="center">RESULT</td>
                            <td class="col-2 fw-bolder" align="center" >UNIT</td>
                            <td class="col-2 fw-bolder" align="center" >RANGE</td>
                            
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >Troponin I</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.tropinin_i == '' %}
                                ------
                                {% else %}
                                {{ test.tropinin_i}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">ng/Ml</td>
                            <td class="col-2 fw-bolder" align="center" >
                                0 - 0.120 
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >CK_MB</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.ck_mb == '' %}
                                ------
                                {% else %}
                                {{ test.ck_mb}}
                                {% endif%}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">ng/Ml</td>
                            <td class="col-2 fw-bolder" align="center" >
                                0 - 24
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >TSH</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.tsh == '' %}
                                ------
                                {% else%}
                                {{ test.tsh}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">μlU/Ml</td>
                            <td class="col-2 fw-bolder" align="center" >
                                0.3 - 4.5
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >CA-125</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.ca_125 == '' %}
                                ------
                                {% else %}
                                {{ test.ca_125}}
                                {% endif%}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">U/Ml</td>
                            <td class="col-2 fw-bolder" align="center" >
                                0 - 35
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >FT4</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.ft4 == '' %}
                                ------
                                {% else %}
                                {{ test.ft4}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">μlU/Ml</td>
                            <td class="col-2 fw-bolder" align="center" >
                                8.9 - 17.2
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >FT3</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.ft3 == '' %}
                                ------
                                {% else%}
                                {{ test.ft3}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">pg/Ml</td>
                            <td class="col-2 fw-bolder" align="center" >
                                2.0 - 4.2
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >T4</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.t4 == '' %}
                                ------
                                {% else %}
                                {{ test.t4}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">nmol/L</td>
                            <td class="col-2 fw-bolder" align="center" >
                                57.9 - 150.6
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >T3</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.t3 == ''%}
                                ------
                                {% else %}
                                {{ test.t3}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">nmol/L</td>
                            <td class="col-2 fw-bolder" align="center" >
                                1.23 - 3.08
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >ASO</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.aso == '' %}
                                ------
                                {% else %}
                                {{ test.aso}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">IU/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                < 200
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >CRP</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.crp == '' %}
                                ------
                                {% else %}
                                {{ test.crp}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">ug/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                < 10
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >hsCRP</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.hscrp == '' %}
                                ------
                                {% else %}
                                {{ test.hscrp}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">ug/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                < 10
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >Procalcitonin</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.procalcitonin == '' %}
                                ------
                                {% else %}
                                {{ test.procalcitonin}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">ng/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                < 0.5
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >Rheumatoid Factor IgM</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.reheu == '' %}
                                ------
                                {% else %}
                                {{ test.reheu}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">IU/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                < 8.0
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >PSA</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.psa == '' %}
                                -------
                                {% else %}
                                {{ test.psa}}
                                {% endif%}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">ng/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                0 - 4
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >pro-BNP</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.pro_bnp == '' %}
                                ------
                                {% else %}
                                {{ test.pro_bnp}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">pg/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                                {% if ptx.patage < 75 %}
                               < 75 y/o = 0 - 300 
                               {% elif ptx.patage > 75 %}
                               > 75 y/o = 0 - 450
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >CEA</td>
                            <td class="col-2 fw-bolder" align="center"><span class="">
                                {% if test.cea == '' %}
                                ------
                                {% else %}
                                {{ test.cea}}
                                {% endif %}
                            </span></td>
                            <td class="col-2 fw-bolder" align="center">pg/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                              < 5.0

                            </td>
                        </tr>
                        <tr>
                            <td class="col-2 fw-bolder" align="center" >ANA</td>
                            <td class="col-2 fw-bolder" align="center"><span class=""> ------- </span></td>
                            <td class="col-2 fw-bolder" align="center">pg/mL</td>
                            <td class="col-2 fw-bolder" align="center" >
                              < 5.0

                            </td>
                        </tr>
                        

                        
                    </table>

                    <table class="w-100 staff_data" style="margin-top: 30px;">
                        <tr class="bg-secondary text-white fw-bolder">
                            <td>Perfomed By:</td>
                            <td>Verified By:</td>
                            <td>Approved By:</td>
                        </tr>
                        <tr class="text-center" style="height: 100px;">
                            <td >
                                <p style="margin-bottom: 50px;"></p>
                                <p class="fw-bolder mb-0">{{ test.perform_by_name}}</p>
                                <p>Lic. No. -------</p>
                            </td>
                            <td style="padding: 0px;">
                                <p style="margin-bottom: 50px;"></p>
                                <p class="fw-bolder mb-0">{{test.verified_by_name}}</p>
                                <p>Lic. No.-------</p>
                            </td>
                            <td>
                                <p style="margin-bottom: 50px;"></p>
                                <p class="fw-bolder mb-0">RAYMUNDO B. IBARRIENTOS, MD.</p>
                                <p>Lic. No. 0078995</p>
                            </td>
                        </tr>
                        <tr class="text-center fw-bolder">
                            <td>Medical Technologist</td>
                            <td>Medical Technologist</td>
                            <td>Pathologist</td>
                        </tr>
                    </table>

                </div>
                <div class="footer" style="height: 20px;">
                    <table style="font-size: 12px;width: 100%;border-top: 4px solid rgb(14, 14, 187);font-style: italic;">
                        <tr>
                            <td width="30%"><span>BRGHGMC-F-MS-LAB-001</span></td>
                            <td width="20%" align="center"><span>Rev 8</span></td>
                            <td width="25%"><span>Effectivity Date: May 2, 2023</span></td>
                            <td width="25%" align="right"><img src="{% static 'integrated/img/padabrghgmc.png'%}" style="width: 150px; height: 20px;margin: 0px;" /></td>
                        </tr>
                    </table>

                </div>
               
            </div>
           
        </div>
        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
        <script>

            // ///////////////
            const rbc = [100,200,300,400,500,600,700,800,900,1000];

            new Chart("lineChart", {
            type: "line",
            data: {
                labels: rbc,
                datasets: [{ 
                data: [860,1140,1060,1060,1070,1110,1330,2210,7830,2478],
                borderColor: "red",
                fill: false
                }, { 
                data: [1600,1700,1700,1900,2000,2700,4000,5000,6000,7000],
                borderColor: "green",
                fill: false
                }, { 
                data: [300,700,2000,5000,6000,4000,2000,1000,200,100],
                borderColor: "blue",
                fill: false
                }]
            },
            options: {
                legend: {display: false}
            }
            });


            // //////////////////////
            const xValues = [];
            const yValues = [];
            generateData("Math.sin(x)", 0, 10, 0.5);

            new Chart("myChart", {
            type: "line",
            data: {
                labels: xValues,
                datasets: [{
                fill: false,
                pointRadius: 4,
                borderColor: "gray",
                data: yValues
                }]
            },    
            options: {
                legend: {display: false},
                title: {
                display: true,
                text: "y = sin(x)",
                fontSize: 16
                }
            }
            });
            function generateData(value, i1, i2, step = 1) {
            for (let x = i1; x <= i2; x += step) {
                yValues.push(eval(value));
                xValues.push(x);
            }
            }
            // /////////////////////////
    
      </script>

    </body>
</html>